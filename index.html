<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Mo2zie&#39;s Blog</title>
  <meta name="author" content="mo2zie | power by Hexo">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Mo2zie&#39;s Blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Mo2zie&#39;s Blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Mo2zie&#39;s Blog</a></h1>
  <h2><a href="/">安静一点..</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-03-02T16:10:06.000Z"><a href="/2016/03/03/nginx-lua-module-bug/">2016-03-03</a></time>
      
      
  
    <h1 class="title"><a href="/2016/03/03/nginx-lua-module-bug/">lua-nginx-module 一处bug分析与修复</a></h1>
  

    </header>
    <div class="entry">
      
        <h3 id="问题概述">问题概述</h3><p>在一次处理反馈问题过程中发现lua-nginx-module的balancer语法在keepalive场景下存在bug，当nginx通过已经建立的回源连接发送请求给原服务器时，连接被上游服务器主动关闭并保证再次发送这个请求时同样会被关闭（触发waf规则或者其他意外关闭），会造成nginx不断创建新的连接。</p>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2016/03/03/nginx-lua-module-bug/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-02-24T04:48:09.000Z"><a href="/2016/02/24/tcpdump-tips/">2016-02-24</a></time>
      
      
  
    <h1 class="title"><a href="/2016/02/24/tcpdump-tips/">Use TCPDUMP To Monitor HTTP Traffic</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Some days ago, i use tcpdump to analysis an connect problem on my Mac. i get http header by use the -vvv option. So today, when i want to do that again on the machine which is running online. It does’nt work. What’s wrong? After searching on google for some minutes, i found that was caused by the version difference. On my Mac the version of tcpdump is 4.7.3, but 4.6.2 of the online machine (it seems only work on 4.7.x). So here comes the quesion, how can i get the http header in 4.6.x or earlier?</p>
<p>As we all know, http use tcp as its Transport Layer protocel, so we can find everything in the tcp package. In the man page of tcpdump, i found -A can print those message. So we can execute the bellow command to monitor http traffic including request and response header and message body.<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2016/02/24/tcpdump-tips/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-01-07T13:18:32.000Z"><a href="/2016/01/07/2015-summary/">2016-01-07</a></time>
      
      
  
    <h1 class="title"><a href="/2016/01/07/2015-summary/">2015 年终总结</a></h1>
  

    </header>
    <div class="entry">
      
        <p>工作有一段时间了，总想着写点什么，但拖来拖去都到了新的一年也还没写成，正好今天没什么事想做不如就来唠叨一下这一年吧。似乎第一次这么正经的写年终总结，可以预见的是会写的乱七八槽，也就想到哪儿写到哪儿吧。</p>
<p>由于前年就早早的敲定了校招所以年初就如愿的进京实习了，一个人租房上下班，生活倒也简单，中间有些开心不开心的事大多也记不清了，总感觉那两个月过的有些浑浑噩噩，工作上部门在转型目标也不明确，手头的事儿也没什么挑战，总感觉身上有劲儿使不出来，事实上这几年也都一直在找一个能让自己全力以赴的事情，算是一个长远的目标吧。其实那时候就有过想走的想法，不过当时也不知道如果走了再找什么样的工作，也没拿定主意。后来到了5月底就跟几个老同学跑去宁夏玩儿了，那一周玩的特别开心，尤其是在沙漠跟大家喝着x5聊着天的晚上，后来一时兴起我就跑去外面裸奔了，现在想起来倒也没什么后悔的，趁年轻该放纵就放纵一把嘛，虽然说好的出了沙漠大家就把这件事忘掉，但是大家默契的都把我出卖了。从宁夏回来，就是整理论文毕业了，喝酒，撸串，喝酒，撸串大概就是这样过完的那一个月，感觉那时候真能喝，现在喝一瓶啤酒我都难受。记得，从石家庄走的的那天，阿伟阿芮去车站送我，虽然一路上没说一句话，大家心里都懂，我们三个真是结结实实的一起住了四年，在入站口草草合了一个影我就进站了，候车的时候阿芮发了一条短信给我，当时眼泪就下来了，说到底我还是一个感性并且有些矫情的人。
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2016/01/07/2015-summary/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-09-05T04:35:42.000Z"><a href="/2015/09/05/ssh-key/">2015-09-05</a></time>
      
      
  
    <h1 class="title"><a href="/2015/09/05/ssh-key/">ssh key manage</a></h1>
  

    </header>
    <div class="entry">
      
        <p>有时我们需要同时在github, gitlab等多个代码托管平台工作又不想使用相同的ssh key，那么就需要根据不同的host来配置。</p>
<h3 id="create_key:_id_rsa_moz">create key: id_rsa_moz</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/.ssh</span><br><span class="line">$ ssh-keygen -t rsa -C <span class="string">"pisc@mo2zie.me"</span></span><br></pre></td></tr></table></figure>
<p>在输入文件名称时注意与已有的区分<br>
      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2015/09/05/ssh-key/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






<nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:mo2zie.me">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/nginx/">nginx</a><small>1</small></li>
  
    <li><a href="/tags/openresty/">openresty</a><small>1</small></li>
  
    <li><a href="/tags/备忘/">备忘</a><small>2</small></li>
  
    <li><a href="/tags/工具/">工具</a><small>1</small></li>
  
    <li><a href="/tags/总结/">总结</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2016 mo2zie | power by Hexo
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>